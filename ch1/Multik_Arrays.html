

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Kotlin NDArrays &#8212; Data Science with Kotlin</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'ch1/Multik_Arrays';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Data Analysis and Manipulation" href="../ch2/Data_Manipulation.html" />
    <link rel="prev" title="Working with Arrays and Matrices" href="Arrays%26Matrices.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../Introduction.html">
  
  
  
  
  
    <p class="title logo__title">Data Science with Kotlin</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../Introduction.html">
                    Data Science with Kotlin
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="Arrays%26Matrices.html">Working with Arrays and Matrices</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Kotlin NDArrays</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ch2/Data_Manipulation.html">Data Analysis and Manipulation</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../ch2/Intro_dataframe.html">Data handling with Dataframe</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ch3/io.html">Data Loading and Storage</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ch4/Intro_DataCleaning.html">Data Cleaning and Preparation</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../ch4/kt_data_manipulation.html">Data Manipulation with Kotlin</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ch5/intro_wrangling.html">Data Wrangling</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../ch5/kt_wrangling.html">Data Wrangling with Kotlin</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ch6/intro_plotting.html">Data Visualization</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../ch6/kt_plotting.html">Visualizing Data in Kotlin</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ch7/intro_aggregation_grouping.html">Data Aggregation and Group Operations</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../ch7/kt_aggregation.html">Data Grouping and Aggregation with Kotlin</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../DA_examples/DA_Introduction.html">Data Analysis Examples</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../DA_examples/tips_kotlin.html">Kotlin: Tips Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../DA_examples/tips_python.html">Python: Tips Dataset</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../bibliography.html">Bibliography</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/S-furi/uni-internship/tree/report/report" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/S-furi/uni-internship/tree/report/report/issues/new?title=Issue%20on%20page%20%2Fch1/Multik_Arrays.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/ch1/Multik_Arrays.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Kotlin NDArrays</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mutlik-engines">Mutlik <em>Engines</em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creation">Creation</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#arithmetic-with-ndarrays">Arithmetic with NDArrays</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#indexing-and-slicing">Indexing and Slicing</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#inplace-context"><code class="docutils literal notranslate"><span class="pre">inplace</span></code> context</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mathematical-and-statistical-methods">Mathematical and Statistical Methods</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#example-random-walks">Example: Random Walks</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusions">Conclusions</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="kotlin-ndarrays">
<h1>Kotlin NDArrays<a class="headerlink" href="#kotlin-ndarrays" title="Permalink to this heading">#</a></h1>
<section id="mutlik-engines">
<h2>Mutlik <em>Engines</em><a class="headerlink" href="#mutlik-engines" title="Permalink to this heading">#</a></h2>
<p>Multik engines are a key feature of this library, which provide a way to perform computation on arrays using different backends.</p>
<p>In the context of Multik, a <strong>backend</strong> is a software component that provides the implementation of <em>specific array operations</em> (i.e. a backend might implement the algorithm for matrix multiplication).
Multik lets the user select a backend (a default one is loaded when specifying anything), depending on his specific needs and requirements.
Currently, there are several Multik engines available, including:</p>
<ul class="simple">
<li><p>JVM Engine: default engine, runs on the JVM and provides basic array operations.</p></li>
<li><p>Apache Arrow Engine</p></li>
</ul>
<p>Thanks to <strong>Multik</strong> and the standard Collections library, it’s easy to create, access and manipulate N-dimensional arrays and matrices.</p>
<p>You can import Multik using Jupyter’s magic command <code class="docutils literal notranslate"><span class="pre">%use</span></code>, for importing Multik library and dependencies.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">use</span><span class="w"> </span><span class="n">multik</span>
</pre></div>
</div>
</div>
</div>
<p>We can then create a simple 1D array as follows:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="nv">arr</span><span class="p">:</span><span class="w"> </span><span class="n">NDArray</span><span class="o">&lt;</span><span class="kt">Int</span><span class="p">,</span><span class="w"> </span><span class="n">D1</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mk</span><span class="p">.</span><span class="na">ndarray</span><span class="p">(</span><span class="n">mk</span><span class="o">[</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="o">]</span><span class="p">)</span>
<span class="n">arr</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1, 2, 3]
</pre></div>
</div>
</div>
</div>
<p>Notice the type definition of the Array, where we must specify:</p>
<ul class="simple">
<li><p><strong>Type</strong>: Any Kotlin subtype of <code class="docutils literal notranslate"><span class="pre">Number</span></code> (<code class="docutils literal notranslate"><span class="pre">Boolean</span></code> is not permitted).</p></li>
<li><p><strong>Dimension</strong>: Multik defines 5 <code class="docutils literal notranslate"><span class="pre">Dimension</span></code> types: <code class="docutils literal notranslate"><span class="pre">D1</span></code>, <code class="docutils literal notranslate"><span class="pre">D2</span></code>, <code class="docutils literal notranslate"><span class="pre">D3</span></code>, <code class="docutils literal notranslate"><span class="pre">D4</span></code>, <code class="docutils literal notranslate"><span class="pre">DN</span></code>. <code class="docutils literal notranslate"><span class="pre">DN</span></code> is used in all the cases where the dimension is not known in advance, or when the dimension size is major than 4.</p></li>
</ul>
<p>In the same way, we can create a 2 dimensional array, but this time we let the compiler infer the type and dimension</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="nv">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mk</span><span class="p">.</span><span class="na">ndarray</span><span class="p">(</span><span class="n">mk</span><span class="o">[</span><span class="n">mk</span><span class="o">[</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="n">mk</span><span class="o">[</span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">6</span><span class="o">]]</span><span class="p">)</span>
<span class="n">arr</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[1, 2, 3],
[4, 5, 6]]
</pre></div>
</div>
</div>
</div>
<p>We can also create an array from <em>Kotlin Collections</em> <strong>List</strong> or <strong>Set</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="nv">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mk</span><span class="p">.</span><span class="na">ndarray</span><span class="p">(</span><span class="n">listOf</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">))</span>
<span class="n">arr</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1, 2, 3]
</pre></div>
</div>
</div>
</div>
<p>Already from these examples, it’s quite easy to spot the similarities with NumPy API, but at the same time, Kotlin’s static typing can be a bit tedious at first comparing to NumPy, but the effort will often pay off.</p>
</section>
<section id="creation">
<h2>Creation<a class="headerlink" href="#creation" title="Permalink to this heading">#</a></h2>
<p>We will go through simple <code class="docutils literal notranslate"><span class="pre">NDArrays</span></code> creation methods. Most of the times they’re very similar to NumPy’s methods, so the following examples should be already familiar.</p>
<p>Creating equally spaced arrays with <code class="docutils literal notranslate"><span class="pre">arange</span></code> and <code class="docutils literal notranslate"><span class="pre">linspace</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mk</span><span class="p">.</span><span class="na">linspace</span><span class="o">&lt;</span><span class="kt">Double</span><span class="o">&gt;</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">)</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mk</span><span class="p">.</span><span class="na">arange</span><span class="o">&lt;</span><span class="kt">Int</span><span class="o">&gt;</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">)</span>

<span class="n">println</span><span class="p">(</span><span class="s">&quot;a -&gt; </span><span class="si">$</span><span class="n">a</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">println</span><span class="p">(</span><span class="s">&quot;b -&gt; </span><span class="si">$</span><span class="n">b</span><span class="s">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>a -&gt; [0.0, 0.25, 0.5, 0.75, 1.0]
b -&gt; [0, 2, 4, 6, 8]
</pre></div>
</div>
</div>
</div>
<p>Generating an array of Zeros and Ones</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="nv">zrs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mk</span><span class="p">.</span><span class="na">zeros</span><span class="o">&lt;</span><span class="kt">Double</span><span class="o">&gt;</span><span class="p">(</span><span class="m">10</span><span class="p">)</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">ons</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mk</span><span class="p">.</span><span class="na">ones</span><span class="o">&lt;</span><span class="kt">Double</span><span class="o">&gt;</span><span class="p">(</span><span class="m">10</span><span class="p">)</span>
<span class="n">println</span><span class="p">(</span><span class="s">&quot;Zeros -&gt;</span><span class="si">$</span><span class="n">zrs</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">println</span><span class="p">(</span><span class="s">&quot;Ones -&gt; </span><span class="si">$</span><span class="n">ons</span><span class="s">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Zeros -&gt;[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Ones -&gt; [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0]
</pre></div>
</div>
</div>
</div>
<p>We can then map the array to a matrix using the <code class="docutils literal notranslate"><span class="pre">reshape</span></code> method, which takes in input an arbitrary number of dimensions size along which the array will be mapped.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="n">mk</span><span class="p">.</span><span class="na">zeros</span><span class="o">&lt;</span><span class="kt">Int</span><span class="o">&gt;</span><span class="p">(</span><span class="m">50</span><span class="p">).</span><span class="na">reshape</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">)</span><span class="w"> </span><span class="c1">// three dimensional matrix with (z, x, y) = (2, 5, 5)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[[0, 0, 0, 0, 0],
[0, 0, 0, 0, 0],
[0, 0, 0, 0, 0],
[0, 0, 0, 0, 0],
[0, 0, 0, 0, 0]],

[[0, 0, 0, 0, 0],
[0, 0, 0, 0, 0],
[0, 0, 0, 0, 0],
[0, 0, 0, 0, 0],
[0, 0, 0, 0, 0]]]
</pre></div>
</div>
</div>
</div>
<p>It’s also possible to create an <code class="docutils literal notranslate"><span class="pre">NDArray</span></code> providing a <strong>lambda</strong> for constructing it, considering that the matrix will be built upon a <code class="docutils literal notranslate"><span class="pre">arange</span></code> vector.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="n">mk</span><span class="p">.</span><span class="na">d3array</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">it</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[[0, 1, 0, 1, 0],
[1, 0, 1, 0, 1],
[0, 1, 0, 1, 0],
[1, 0, 1, 0, 1],
[0, 1, 0, 1, 0]],

[[1, 0, 1, 0, 1],
[0, 1, 0, 1, 0],
[1, 0, 1, 0, 1],
[0, 1, 0, 1, 0],
[1, 0, 1, 0, 1]]]
</pre></div>
</div>
</div>
</div>
<p>Same as</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="n">mk</span><span class="p">.</span><span class="na">arange</span><span class="o">&lt;</span><span class="kt">Int</span><span class="o">&gt;</span><span class="p">(</span><span class="m">50</span><span class="p">).</span><span class="na">map</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">it</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="p">}.</span><span class="na">reshape</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[[0, 1, 0, 1, 0],
[1, 0, 1, 0, 1],
[0, 1, 0, 1, 0],
[1, 0, 1, 0, 1],
[0, 1, 0, 1, 0]],

[[1, 0, 1, 0, 1],
[0, 1, 0, 1, 0],
[1, 0, 1, 0, 1],
[0, 1, 0, 1, 0],
[1, 0, 1, 0, 1]]]
</pre></div>
</div>
</div>
</div>
<section id="arithmetic-with-ndarrays">
<h3>Arithmetic with NDArrays<a class="headerlink" href="#arithmetic-with-ndarrays" title="Permalink to this heading">#</a></h3>
<p>In the current version of Multik, an <code class="docutils literal notranslate"><span class="pre">NDArray</span></code> object support all arithmetic operations, enabling what are called as <strong>vectorized</strong> operations.
Vectorization is very convenient because enable the user to express batch operations on data without writing any for loops (and also could possibly enhance performances).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="nv">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mk</span><span class="p">.</span><span class="na">ndarray</span><span class="p">(</span><span class="n">mk</span><span class="o">[</span><span class="n">mk</span><span class="o">[</span><span class="m">1.0</span><span class="p">,</span><span class="w"> </span><span class="m">2.0</span><span class="p">,</span><span class="w"> </span><span class="m">3.0</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="n">mk</span><span class="o">[</span><span class="m">4.0</span><span class="p">,</span><span class="w"> </span><span class="m">5.0</span><span class="p">,</span><span class="w"> </span><span class="m">6.0</span><span class="o">]]</span><span class="p">)</span>
<span class="n">arr</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[1.0, 2.0, 3.0],
[4.0, 5.0, 6.0]]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">arr</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[1.0, 4.0, 9.0],
[16.0, 25.0, 36.0]]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="m">1.0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">arr</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[1.0, 0.5, 0.3333333333333333],
[0.25, 0.2, 0.16666666666666666]]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span><span class="w"> </span><span class="n">dot</span><span class="w"> </span><span class="n">arr</span><span class="p">.</span><span class="na">transpose</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[14.0, 32.0],
[32.0, 77.0]]
</pre></div>
</div>
</div>
</div>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Operations among equal shaped arrays and matrices are always allowed. As the current version of Multik (v0.2.0), there is no native support for array <strong>broadcasting</strong>.
In section K (some ref to where i could explain how to) I explain how to archieve array broadcasting using tensor algebra provided by <a class="reference external" href="https://github.com/SciProgCentre/kmath">Kmath</a></p>
</div>
</aside>
<p>Multik supports two separate packages for linear algebra basic operations (package <code class="docutils literal notranslate"><span class="pre">api.linalg</span></code>) and vectorized math operations (package <code class="docutils literal notranslate"><span class="pre">api.math</span></code>)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="n">mk</span><span class="p">.</span><span class="na">math</span><span class="p">.</span><span class="na">cumSum</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span><span class="w"> </span><span class="n">axis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[1.0, 3.0, 6.0],
[4.0, 9.0, 15.0]]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="nv">sqrMat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mk</span><span class="p">.</span><span class="na">ones</span><span class="o">&lt;</span><span class="kt">Double</span><span class="o">&gt;</span><span class="p">(</span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">)</span>
<span class="c1">// Frobenius norm of the matrix (default when calling `norm()`)</span>
<span class="n">mk</span><span class="p">.</span><span class="na">linalg</span><span class="p">.</span><span class="na">norm</span><span class="p">(</span><span class="n">sqrMat</span><span class="p">,</span><span class="w"> </span><span class="n">norm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Norm</span><span class="p">.</span><span class="na">Fro</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3.0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="n">mk</span><span class="p">.</span><span class="na">math</span><span class="p">.</span><span class="na">sin</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[0.8414709848078965, 0.9092974268256817, 0.1411200080598672],
[-0.7568024953079283, -0.9589242746631385, -0.27941549819892586]]
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">linalg</span></code> package contains also methods for solving linear matrix equations and matrix decomposition methods.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="c1">// solve the linear system</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mk</span><span class="p">.</span><span class="na">d2array</span><span class="p">(</span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">it</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nb">it</span><span class="w"> </span><span class="p">}.</span><span class="na">asType</span><span class="o">&lt;</span><span class="kt">Double</span><span class="o">&gt;</span><span class="p">()</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mk</span><span class="p">.</span><span class="na">ndarray</span><span class="p">(</span><span class="n">mk</span><span class="o">[</span><span class="m">54.0</span><span class="p">,</span><span class="w"> </span><span class="m">396.0</span><span class="p">,</span><span class="w"> </span><span class="m">1062.0</span><span class="o">]</span><span class="p">)</span>

<span class="kd">val</span><span class="w"> </span><span class="nv">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mk</span><span class="p">.</span><span class="na">linalg</span><span class="p">.</span><span class="na">solve</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">).</span><span class="na">map</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">it</span><span class="p">.</span><span class="na">roundToInt</span><span class="p">()</span><span class="w"> </span><span class="p">}</span>
<span class="n">println</span><span class="p">(</span><span class="s">&quot; x = </span><span class="si">$</span><span class="n">res</span><span class="s">&quot;</span><span class="p">)</span>

<span class="c1">// check</span>
<span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="n">dot</span><span class="w"> </span><span class="n">res</span><span class="p">.</span><span class="na">asType</span><span class="o">&lt;</span><span class="kt">Double</span><span class="o">&gt;</span><span class="p">())</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">b</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> x = [0, 6, 12]
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>true
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">linalg</span></code> also offers matrix inversion and <code class="docutils literal notranslate"><span class="pre">qr</span></code> decomposition</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mk</span><span class="p">.</span><span class="na">rand</span><span class="o">&lt;</span><span class="kt">Double</span><span class="o">&gt;</span><span class="p">(</span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">)</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">mat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">X</span><span class="p">.</span><span class="na">transpose</span><span class="p">().</span><span class="na">dot</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="n">mk</span><span class="p">.</span><span class="na">linalg</span><span class="p">.</span><span class="na">inv</span><span class="p">(</span><span class="n">mat</span><span class="p">)</span>

<span class="kd">val</span><span class="w"> </span><span class="p">(</span><span class="nv">q</span><span class="p">,</span><span class="w"> </span><span class="nv">r</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mk</span><span class="p">.</span><span class="na">linalg</span><span class="p">.</span><span class="na">qr</span><span class="p">(</span><span class="n">mat</span><span class="p">)</span>
<span class="n">q</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[-0.30188948369288604, 0.36948030653024977, 0.31328306935193995, 0.7220615838621778, 0.39093200213058377],
[-0.5323036741105353, -0.46300105100495464, 0.6519382996687945, -0.13780024526207268, -0.24139256642947096],
[-0.49094620945891393, -0.06735516917524868, -0.5707355976751803, 0.3694827313891453, -0.5405353728988229],
[-0.33534423786516154, 0.7822196202083642, 0.10204175921863778, -0.4660595278277624, -0.21920926939398622],
[-0.5215664863779369, -0.18085927347270922, -0.3750713649484711, -0.32543692052736733, 0.6698287881538476]]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="n">r</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[-2.311404757467395, -4.322301104798068, -4.570634827519278, -2.7010533254068894, -4.823370010621805],
[0.0, -0.20160209575368554, -0.17256409514278054, 0.18895593161229185, -0.1647606736923718],
[0.0, 0.0, -0.578684796564817, -0.11176706966541122, -0.53402698944103],
[0.0, 0.0, 0.0, -0.10401341605389554, -0.06047350308547101],
[0.0, 0.0, 0.0, 0.0, 0.05440743575781085]]
</pre></div>
</div>
</div>
</div>
<p>For more, visit Multik’s documentation for <a class="reference external" href="https://kotlin.github.io/multik/multik-core/org.jetbrains.kotlinx.multik.api.linalg/index.html"><code class="docutils literal notranslate"><span class="pre">linalg</span></code></a> and <a class="reference external" href="https://kotlin.github.io/multik/multik-core/org.jetbrains.kotlinx.multik.api.math/index.html"><code class="docutils literal notranslate"><span class="pre">math</span></code></a></p>
</section>
<section id="indexing-and-slicing">
<h3>Indexing and Slicing<a class="headerlink" href="#indexing-and-slicing" title="Permalink to this heading">#</a></h3>
<p>There are many ways to select subset of data of and <code class="docutils literal notranslate"><span class="pre">NDArray</span></code>.</p>
<p>For one dimensional arrays is straightforward:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="nv">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mk</span><span class="p">.</span><span class="na">arange</span><span class="o">&lt;</span><span class="kt">Int</span><span class="o">&gt;</span><span class="p">(</span><span class="m">10</span><span class="p">)</span>
<span class="n">arr</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="c1">// basic indexing</span>
<span class="n">arr</span><span class="o">[</span><span class="m">2</span><span class="o">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="c1">// range indexing</span>
<span class="n">println</span><span class="p">(</span><span class="n">arr</span><span class="o">[</span><span class="m">1.</span><span class="p">.</span><span class="m">3</span><span class="o">]</span><span class="p">)</span>
<span class="c1">// the behavior is different using kotlin keyword `until`</span>
<span class="n">println</span><span class="p">(</span><span class="n">arr</span><span class="o">[</span><span class="m">1</span><span class="w"> </span><span class="n">until</span><span class="w"> </span><span class="m">3</span><span class="o">]</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1, 2, 3]
[1, 2]
</pre></div>
</div>
</div>
</div>
<p>For Multi-Index arrays the <em>range</em> operator can be used like:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mk</span><span class="p">.</span><span class="na">linspace</span><span class="o">&lt;</span><span class="kt">Int</span><span class="o">&gt;</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">20</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">).</span><span class="na">reshape</span><span class="p">(</span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">)</span>

<span class="c1">// single elemt selection</span>
<span class="n">a</span><span class="o">[</span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="o">]</span>
<span class="c1">// row selection</span>
<span class="n">a</span><span class="o">[</span><span class="m">0</span><span class="o">]</span>
<span class="c1">// range selection left inclusive</span>
<span class="n">a</span><span class="o">[</span><span class="m">0.</span><span class="p">.</span><span class="m">2</span><span class="o">]</span><span class="w"> </span><span class="c1">// != a[0 until 2] -&gt; left exlusive</span>
<span class="c1">// selecting first column of first 3 rows</span>
<span class="n">a</span><span class="o">[</span><span class="m">0.</span><span class="p">.</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="o">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[0, 4, 8]
</pre></div>
</div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Slices are <strong>copies</strong> of the source array, unlike NumPy that generates a <em>view</em> on the original array.</p>
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="o">[</span><span class="m">0.</span><span class="p">.</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="o">]</span>
<span class="n">a</span><span class="o">[</span><span class="m">0.</span><span class="p">.</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="o">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="c1">// false!</span>
</pre></div>
</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">NDArrays</span></code> does not support boolean indexing, but filters can be applied with the <code class="docutils literal notranslate"><span class="pre">filter()</span></code> method, like every <code class="docutils literal notranslate"><span class="pre">Collection</span></code> in Kotlin’s standard library.</p>
<p>For each “indexed functional method” that can be applied to kotlin collections, like <code class="docutils literal notranslate"><span class="pre">mapIndexed</span></code>, <code class="docutils literal notranslate"><span class="pre">forEachIndexed</span></code>, <code class="docutils literal notranslate"><span class="pre">filterIndexed</span></code>, Multik offers the counterpart for multidimensional arrays (of the form <code class="docutils literal notranslate"><span class="pre">*MultiIndexed()</span></code>), where the index is an <code class="docutils literal notranslate"><span class="pre">intArray()</span></code> of the combination of the indices of the current element.</p>
<p>A full list of those methods, and more, can be found int the <a class="reference external" href="https://kotlin.github.io/multik/multik-core/org.jetbrains.kotlinx.multik.ndarray.operations/index.html"><code class="docutils literal notranslate"><span class="pre">ndarray.operations</span></code></a> package.</p>
<section id="inplace-context">
<h4><code class="docutils literal notranslate"><span class="pre">inplace</span></code> context<a class="headerlink" href="#inplace-context" title="Permalink to this heading">#</a></h4>
<p>Multik provides <code class="docutils literal notranslate"><span class="pre">inplace</span></code> context for operating directly inside an array, modifying it’s structure.
We can then call the default <code class="docutils literal notranslate"><span class="pre">math</span></code> context for applying <em>inplace</em> mathematical transformation on the elements of the array.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mk</span><span class="p">.</span><span class="na">d1array</span><span class="p">(</span><span class="m">10</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">it</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="p">}.</span><span class="na">asType</span><span class="o">&lt;</span><span class="kt">Double</span><span class="o">&gt;</span><span class="p">()</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mk</span><span class="p">.</span><span class="na">arange</span><span class="o">&lt;</span><span class="kt">Double</span><span class="o">&gt;</span><span class="p">(</span><span class="m">10</span><span class="p">)</span>

<span class="n">println</span><span class="p">(</span><span class="s">&quot;Before -&gt; </span><span class="si">$</span><span class="n">a</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">a</span><span class="p">.</span><span class="na">inplace</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">    </span><span class="n">math</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">(</span><span class="k">this</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">b</span>
<span class="w">        </span><span class="n">abs</span><span class="p">()</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">println</span><span class="p">(</span><span class="s">&quot;After -&gt; </span><span class="si">$</span><span class="n">a</span><span class="s">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Before -&gt; [0.0, 10.0, 20.0, 30.0, 40.0, 50.0, 60.0, 70.0, 80.0, 90.0]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>After -&gt; [0.0, 9.0, 36.0, 81.0, 144.0, 225.0, 324.0, 441.0, 576.0, 729.0]
</pre></div>
</div>
</div>
</div>
<p>Note that this approach violates the immutability provided by Kotlin’s <code class="docutils literal notranslate"><span class="pre">val</span></code>  keyword!</p>
</section>
</section>
<section id="mathematical-and-statistical-methods">
<h3>Mathematical and Statistical Methods<a class="headerlink" href="#mathematical-and-statistical-methods" title="Permalink to this heading">#</a></h3>
<p>Both <code class="docutils literal notranslate"><span class="pre">api.stat</span></code> and <code class="docutils literal notranslate"><span class="pre">api.math</span></code> provides several methods for computing basic statistics like <code class="docutils literal notranslate"><span class="pre">mean</span></code>, <code class="docutils literal notranslate"><span class="pre">median</span></code>, <code class="docutils literal notranslate"><span class="pre">max</span></code>, <code class="docutils literal notranslate"><span class="pre">argMax</span></code>, <code class="docutils literal notranslate"><span class="pre">sum</span> </code>and <code class="docutils literal notranslate"><span class="pre">cumSum</span></code>, some of them are callable by the instance method or using the top-level Multik function.</p>
<p>If we want to compute the mean of a matrix, we must specify whether we want to compute the mean for the <em>whole</em> matrix, or row/column-wise with <code class="docutils literal notranslate"><span class="pre">mean()</span></code> and <code class="docutils literal notranslate"><span class="pre">meanD2()</span></code> respectively (for higher dimensional matrices, the <code class="docutils literal notranslate"><span class="pre">meanD*</span></code> variant covers dimension up to 4, then the <code class="docutils literal notranslate"><span class="pre">meanDN</span></code> has to be used).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="nv">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mk</span><span class="p">.</span><span class="na">rand</span><span class="o">&lt;</span><span class="kt">Double</span><span class="o">&gt;</span><span class="p">(</span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">)</span>

<span class="n">println</span><span class="p">(</span><span class="s">&quot;mean of the whole matrix -&gt; </span><span class="si">${</span><span class="n">mk</span><span class="p">.</span><span class="na">stat</span><span class="p">.</span><span class="na">mean</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span><span class="si">}</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">println</span><span class="p">(</span><span class="s">&quot;mean across columns -&gt; </span><span class="si">${</span><span class="n">mk</span><span class="p">.</span><span class="na">stat</span><span class="p">.</span><span class="na">meanD2</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="si">}</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">println</span><span class="p">(</span><span class="s">&quot;mean across rows -&gt; </span><span class="si">${</span><span class="n">mk</span><span class="p">.</span><span class="na">stat</span><span class="p">.</span><span class="na">meanD2</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="si">}</span><span class="s">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>mean of the whole matrix -&gt; 0.5314246791028435
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>mean across columns -&gt; [0.48009328627502895, 0.5258239100194002, 0.5660426374106935, 0.5537388827062515]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>mean across rows -&gt; [0.4287715029887322, 0.6709688339608653, 0.5541243133824354, 0.4116743105458772, 0.5915844346363076]
</pre></div>
</div>
</div>
</div>
<section id="example-random-walks">
<h4>Example: Random Walks<a class="headerlink" href="#example-random-walks" title="Permalink to this heading">#</a></h4>
<p>This <a class="reference external" href="https://wesmckinney.com/book/numpy-basics.html#example_random_walks">example</a> has been taken from the book <a class="reference external" href="https://wesmckinney.com/book/"><em>Python for Data Analysis</em></a></p>
<p>A <strong>simple</strong> pure kotlin implementation can be summarized as follows</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="nn">java.util.Random</span>
<span class="kd">var</span><span class="w"> </span><span class="nv">position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">walk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mutableListOf</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">rand</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Random</span><span class="p">(</span><span class="m">123456</span><span class="p">)</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">steps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1000</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="n">until</span><span class="w"> </span><span class="n">steps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">step</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rand</span><span class="p">.</span><span class="na">nextBoolean</span><span class="p">())</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="o">-</span><span class="m">1</span>
<span class="w">    </span><span class="n">position</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">step</span>
<span class="w">    </span><span class="n">walk</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>We can plot that walk</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">use</span><span class="w"> </span><span class="n">lets</span><span class="o">-</span><span class="n">plot</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">   <div id="DVl1PR"></div>
   <script type="text/javascript" data-lets-plot-script="library">
       if(!window.letsPlotCallQueue) {
           window.letsPlotCallQueue = [];
       }; 
       window.letsPlotCall = function(f) {
           window.letsPlotCallQueue.push(f);
       };
       (function() {
           var script = document.createElement("script");
           script.type = "text/javascript";
           script.src = "https://cdn.jsdelivr.net/gh/JetBrains/lets-plot@v3.1.0/js-package/distr/lets-plot.min.js";
           script.onload = function() {
               window.letsPlotCall = function(f) {f();};
               window.letsPlotCallQueue.forEach(function(f) {f();});
               window.letsPlotCallQueue = [];
               
               
           };
           script.onerror = function(event) {
               window.letsPlotCall = function(f) {};
               window.letsPlotCallQueue = [];
               var div = document.createElement("div");
               div.style.color = 'darkred';
               div.textContent = 'Error loading Lets-Plot JS';
               document.getElementById("DVl1PR").appendChild(div);
           };
           var e = document.getElementById("DVl1PR");
           e.appendChild(script);
       })();
   </script></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="n">ggplot</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">x</span><span class="o">=</span><span class="p">(</span><span class="m">0.</span><span class="p">.</span><span class="m">100</span><span class="p">).</span><span class="na">toList</span><span class="p">()</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="w"> </span><span class="n">walk</span><span class="p">.</span><span class="na">slice</span><span class="p">(</span><span class="m">0.</span><span class="p">.</span><span class="m">100</span><span class="p">)</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">+</span>
<span class="w">    </span><span class="n">geomLine</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">   <div id="2STeWO"></div>
   <script type="text/javascript" data-lets-plot-script="plot">
       (function() {
           var plotSpec={
"mapping":{
"x":"x",
"y":"y"
},
"kind":"plot",
"scales":[],
"layers":[{
"mapping":{
},
"stat":"identity",
"position":"identity",
"geom":"line",
"data":{
}
}],
"data":{
"x":[0.0,1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0,9.0,10.0,11.0,12.0,13.0,14.0,15.0,16.0,17.0,18.0,19.0,20.0,21.0,22.0,23.0,24.0,25.0,26.0,27.0,28.0,29.0,30.0,31.0,32.0,33.0,34.0,35.0,36.0,37.0,38.0,39.0,40.0,41.0,42.0,43.0,44.0,45.0,46.0,47.0,48.0,49.0,50.0,51.0,52.0,53.0,54.0,55.0,56.0,57.0,58.0,59.0,60.0,61.0,62.0,63.0,64.0,65.0,66.0,67.0,68.0,69.0,70.0,71.0,72.0,73.0,74.0,75.0,76.0,77.0,78.0,79.0,80.0,81.0,82.0,83.0,84.0,85.0,86.0,87.0,88.0,89.0,90.0,91.0,92.0,93.0,94.0,95.0,96.0,97.0,98.0,99.0,100.0],
"y":[0.0,-1.0,0.0,1.0,0.0,-1.0,-2.0,-1.0,-2.0,-3.0,-2.0,-1.0,-2.0,-3.0,-4.0,-3.0,-4.0,-3.0,-4.0,-3.0,-2.0,-3.0,-2.0,-3.0,-4.0,-5.0,-4.0,-3.0,-2.0,-3.0,-4.0,-5.0,-6.0,-7.0,-8.0,-7.0,-6.0,-5.0,-4.0,-3.0,-4.0,-3.0,-4.0,-3.0,-4.0,-3.0,-4.0,-5.0,-4.0,-5.0,-6.0,-7.0,-8.0,-9.0,-10.0,-9.0,-8.0,-9.0,-10.0,-11.0,-12.0,-13.0,-12.0,-13.0,-12.0,-13.0,-12.0,-13.0,-14.0,-15.0,-16.0,-15.0,-16.0,-15.0,-16.0,-15.0,-14.0,-13.0,-12.0,-13.0,-12.0,-13.0,-12.0,-11.0,-12.0,-13.0,-14.0,-15.0,-14.0,-13.0,-14.0,-13.0,-14.0,-13.0,-14.0,-13.0,-12.0,-13.0,-14.0,-15.0,-14.0]
}
};
           var plotContainer = document.getElementById("2STeWO");
           window.letsPlotCall(function() {{
               LetsPlot.buildPlotFromProcessedSpecs(plotSpec, -1, -1, plotContainer);
           }});
       })();    
   </script></div></div>
</div>
<p>We can get the same result computing the cumulative sum of the random steps. (note that kotlin <code class="docutils literal notranslate"><span class="pre">List</span></code> can be used for creating one dimensional vector)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="nv">nsteps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1000</span>

<span class="kd">val</span><span class="w"> </span><span class="nv">draws</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mk</span><span class="p">.</span><span class="na">d1array</span><span class="p">(</span><span class="n">nsteps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">rand</span><span class="p">.</span><span class="na">nextInt</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">)}</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">steps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mk</span><span class="p">.</span><span class="na">d1array</span><span class="p">(</span><span class="n">draws</span><span class="p">.</span><span class="na">size</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">draws</span><span class="o">[</span><span class="nb">it</span><span class="o">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="w"> </span><span class="p">}</span>

<span class="kd">val</span><span class="w"> </span><span class="nv">walk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">steps</span><span class="p">.</span><span class="na">cumSum</span><span class="p">()</span>
<span class="n">walk</span><span class="p">.</span><span class="na">min</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-20
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="n">walk</span><span class="p">.</span><span class="na">max</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>9
</pre></div>
</div>
</div>
</div>
<p>We can get the index of the walk when we cross the 10 steps above or below the origin, even if we have to pass trough a list, because Multik does not support <code class="docutils literal notranslate"><span class="pre">Boolean</span></code> arrays.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="nv">first10</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">abs</span><span class="p">(</span><span class="n">walk</span><span class="p">).</span><span class="na">toList</span><span class="p">().</span><span class="na">map</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">it</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="p">}.</span><span class="na">indexOfFirst</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">it</span><span class="w"> </span><span class="p">}</span>
<span class="n">first10</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>55
</pre></div>
</div>
</div>
</div>
<p>And we can plot the first 100 steps similarly as we did before, illustrating where is the point we computed before</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="n">ggplot</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mk</span><span class="p">.</span><span class="na">arange</span><span class="o">&lt;</span><span class="kt">Int</span><span class="o">&gt;</span><span class="p">(</span><span class="m">100</span><span class="p">).</span><span class="na">toList</span><span class="p">()</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">walk</span><span class="o">[</span><span class="m">0.</span><span class="p">.</span><span class="m">99</span><span class="o">]</span><span class="p">.</span><span class="na">toList</span><span class="p">()</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">+</span>
<span class="w">    </span><span class="n">geomLine</span><span class="p">()</span><span class="w"> </span><span class="o">+</span>
<span class="w">    </span><span class="n">geomPoint</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">first10</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">walk</span><span class="o">[</span><span class="n">first10</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="o">=</span><span class="s">&quot;red&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="o">=</span><span class="m">5.0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">   <div id="jUuz2J"></div>
   <script type="text/javascript" data-lets-plot-script="plot">
       (function() {
           var plotSpec={
"mapping":{
"x":"x",
"y":"y"
},
"kind":"plot",
"scales":[],
"layers":[{
"mapping":{
},
"stat":"identity",
"position":"identity",
"geom":"line",
"data":{
}
},{
"mapping":{
},
"stat":"identity",
"color":"red",
"size":5.0,
"x":55.0,
"y":-10.0,
"position":"identity",
"geom":"point",
"data":{
}
}],
"data":{
"x":[0.0,1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0,9.0,10.0,11.0,12.0,13.0,14.0,15.0,16.0,17.0,18.0,19.0,20.0,21.0,22.0,23.0,24.0,25.0,26.0,27.0,28.0,29.0,30.0,31.0,32.0,33.0,34.0,35.0,36.0,37.0,38.0,39.0,40.0,41.0,42.0,43.0,44.0,45.0,46.0,47.0,48.0,49.0,50.0,51.0,52.0,53.0,54.0,55.0,56.0,57.0,58.0,59.0,60.0,61.0,62.0,63.0,64.0,65.0,66.0,67.0,68.0,69.0,70.0,71.0,72.0,73.0,74.0,75.0,76.0,77.0,78.0,79.0,80.0,81.0,82.0,83.0,84.0,85.0,86.0,87.0,88.0,89.0,90.0,91.0,92.0,93.0,94.0,95.0,96.0,97.0,98.0,99.0],
"y":[1.0,0.0,1.0,0.0,1.0,2.0,1.0,0.0,-1.0,-2.0,-1.0,-2.0,-1.0,-2.0,-1.0,-2.0,-3.0,-4.0,-5.0,-4.0,-3.0,-2.0,-1.0,0.0,1.0,2.0,3.0,2.0,1.0,0.0,-1.0,-2.0,-3.0,-4.0,-5.0,-4.0,-3.0,-4.0,-5.0,-6.0,-5.0,-6.0,-7.0,-8.0,-7.0,-8.0,-7.0,-6.0,-7.0,-8.0,-7.0,-6.0,-7.0,-8.0,-9.0,-10.0,-9.0,-8.0,-9.0,-8.0,-7.0,-6.0,-5.0,-4.0,-5.0,-4.0,-3.0,-2.0,-3.0,-4.0,-3.0,-4.0,-3.0,-2.0,-3.0,-4.0,-3.0,-4.0,-5.0,-4.0,-3.0,-4.0,-3.0,-2.0,-3.0,-2.0,-3.0,-2.0,-1.0,-2.0,-3.0,-2.0,-3.0,-4.0,-5.0,-6.0,-5.0,-6.0,-5.0,-6.0]
}
};
           var plotContainer = document.getElementById("jUuz2J");
           window.letsPlotCall(function() {{
               LetsPlot.buildPlotFromProcessedSpecs(plotSpec, -1, -1, plotContainer);
           }});
       })();    
   </script></div></div>
</div>
<p>Multik’s <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s become handy in case we want to simulate many random walks at once, representing them in a matrix, where each row is a walk and each column of that row is a step:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="nv">nwalks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5000</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">nsteps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1000</span>

<span class="kd">val</span><span class="w"> </span><span class="nv">draws</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mk</span><span class="p">.</span><span class="na">d2array</span><span class="p">(</span><span class="n">nwalks</span><span class="p">,</span><span class="w"> </span><span class="n">nsteps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">rand</span><span class="p">.</span><span class="na">nextInt</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">)}</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">steps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">draws</span><span class="p">.</span><span class="na">map</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">it</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="nv">walks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mk</span><span class="p">.</span><span class="na">math</span><span class="p">.</span><span class="na">cumSum</span><span class="p">(</span><span class="n">steps</span><span class="p">,</span><span class="w"> </span><span class="n">axis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="n">walks</span><span class="p">.</span><span class="na">min</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-105
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="n">walks</span><span class="p">.</span><span class="na">max</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>107
</pre></div>
</div>
</div>
</div>
<p>We can get all the runs that reach 50 or -50 using <code class="docutils literal notranslate"><span class="pre">mapMultiIndexed()</span></code> that will preserve the matrix structure.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="n">mk</span><span class="p">.</span><span class="na">math</span><span class="p">.</span><span class="na">maxD2</span><span class="p">(</span>
<span class="w">    </span><span class="n">walks</span><span class="p">.</span><span class="na">mapMultiIndexed</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">_</span><span class="p">,</span><span class="w"> </span><span class="n">elem</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">elem</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">50</span><span class="p">)</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="m">1</span><span class="p">).</span><span class="na">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>604
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="conclusions">
<h2>Conclusions<a class="headerlink" href="#conclusions" title="Permalink to this heading">#</a></h2>
<p>In this chapter was presented Kotlin’s Multik library for working with N-Dimensional Arrays. The set of data structure and methods are very close to NumPy’s, which makes it very easy to learn if the developer has a basic knowledge of NumPy. However, NumPy has more that 20 years of development and fine tuning, resulting in one of the best libraries for scientific computation: the better support for linear algebra operation, array broadcasting and the possibility to use multidimensional arrays with <em>non-numeric</em> data types, makes it a very flexible and powerful library.
On the other hand, Multik can be used with libraries like <a class="reference external" href="https://github.com/SciProgCentre/kmath">Kmath</a> and <a class="reference external" href="https://github.com/apache/commons-math">Apache Commons Math</a>, or any other library developed in Java, making it very powerful with the right set of components at the need of the developer (i.e. array broadcasting and more advanced linear algebra can be accomplished with the use of Kmath). Please note that Multik is very efficient with basic mathematical computation, and for a little bit more, Kmath connectors for Multik can really help archiving more difficult tasks (i.e. integration).</p>
<p>Kotlin ecosystem for scientific computation is still young, but with the joint use of the right libraries, a lot can be archived.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "kotlin"
        },
        kernelOptions: {
            name: "kotlin",
            path: "./ch1"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'kotlin'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="Arrays%26Matrices.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Working with Arrays and Matrices</p>
      </div>
    </a>
    <a class="right-next"
       href="../ch2/Data_Manipulation.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Data Analysis and Manipulation</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mutlik-engines">Mutlik <em>Engines</em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creation">Creation</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#arithmetic-with-ndarrays">Arithmetic with NDArrays</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#indexing-and-slicing">Indexing and Slicing</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#inplace-context"><code class="docutils literal notranslate"><span class="pre">inplace</span></code> context</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mathematical-and-statistical-methods">Mathematical and Statistical Methods</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#example-random-walks">Example: Random Walks</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusions">Conclusions</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Stefano Furi
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>